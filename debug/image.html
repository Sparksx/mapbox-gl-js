
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Raster TMS + Symbols Test</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
    <script src='/dist/mapbox-gl-dev.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.css' rel='stylesheet' />

    <style>
        body { margin:0; padding:0; overflow:hidden;}
        #map { position:absolute; top:0; bottom:0; left:0px; right:0px;}
        #menu {
          position: relative;
          padding: 10px;
          background: #fff;
          width: 300px;
          font-family: 'Open Sans', sans-serif;
        }
        input {
            vertical-align: inherit
        }
    </style>
</head>
<body>
<div id='map'></div>
<div id='menu'>
    <input id='symbol-osm' type='radio' name='rtoggle' checked value='symbol-osm'>
    <label for='symbol-osm'>symbol-osm</label>
    <input id='symbol-streets' type='radio' name='rtoggle' value='symbol-streets'>
    <label for='symbol-streets'>symbol-streets</label>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibWlrZWxtYXJvbiIsImEiOiJjaWZlY25lZGQ2cTJjc2trbmdiZDdjYjllIn0.Wx1n0X7aeCQyDTnK6_mrGw';
var json = [
  {
    "geometry": {
      "coordinates": [
        37.6290353,
        -1.7803167
      ],
      "type": "Point"
    },
    "properties": {
      "is_in": "Makueni,Kenya",
      "name": "Wote",
      "place": "town",
      "wikidata": "Q7193508"
    },
    "type": "Feature"
  },
  {
    "geometry": {
      "coordinates": [
        37.5364803,
        -1.8178943
      ],
      "type": "Point"
    },
    "properties": {
      "is_in": "Makueni,Kenya",
      "name": "Nziu",
      "place": "village"
    },
    "type": "Feature"
  },
  {
    "geometry": {
      "coordinates": [
        37.7,
        -1.8333
      ],
      "type": "Point"
    },
    "properties": {
      "is_in": "Makueni,Kenya",
      "name": "Ngosini West",
      "place": "village",
      "wikidata": "Q7022586"
    },
    "type": "Feature"
  }
];
var osm_style = {
  "version": 8,
  "sources": {
    "openstreetmap-tiles": {
      "type": "raster",
      "tiles": [
        "https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",
      ],
      "tileSize": 256
    },
    "poi": {
      'type': 'geojson',
      'data': {
        'type': 'FeatureCollection',
        'features': json
      }
    }
  },
  "layers": [{
    "id": "openstreetmap-layer",
    "type": "raster",
    "source": "openstreetmap-tiles",
    "minzoom": 0,
    "maxzoom": 18
  },
  {
    'id': 'poi-layer',
    'type': 'symbol',
    'source': 'poi',
    'layout': {
      "icon-allow-overlap": true,
      'icon-image': 'bus-15',
      'visibility': 'visible'
    }
  }]
};
var map = new mapboxgl.Map({
    container: 'map', // container id
    style: osm_style,
    center: [37.6004, -1.7805], // starting position
    zoom: 12, // starting zoom
    hash: true
});
map.addControl(new mapboxgl.NavigationControl());



map.on('style.load', function() {
  // map.addSource('poi', {
  //   'type': 'geojson',
  //   'data': {
  //     'type': 'FeatureCollection',
  //     'features': json
  //   }
  // });
  //
  // map.addLayer({
  //   'id': 'poi-layer',
  //   'type': 'symbol',
  //   'source': 'poi',
  //   'layout': {
  //     "icon-allow-overlap": true,
  //     'icon-image': 'bus-15',
  //     'visibility': 'visible'
  //   }
  // });
  console.log('images', map.listImages());
});

function switchType(type) {
    var typeId = type.target.id;
    if (typeId == 'symbol-streets') {
      map.setStyle('mapbox://styles/mapbox/streets-v9');
    } else {
      map.setStyle(osm_style);
    }
}

var layerList = document.getElementById('menu');
var inputs = layerList.getElementsByTagName('input');

inputs[0].onclick = switchType;
inputs[1].onclick = switchType;

</script>

</body>
</html>


<!-- <!DOCTYPE html>
<html>
<head>
    <title>Mapbox GL JS debug page</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel='stylesheet' href='/dist/mapbox-gl.css' />
    <style>
        body { margin: 0; padding: 0; }
        html, body, #map { height: 100%; }
    </style>
</head>

<body>
<div id='map'></div>

<script src='/dist/mapbox-gl-dev.js'></script>
<script src='/debug/access_token_generated.js'></script>
<script>

var imageStyle = {
    "version": 8,
    "sources": {
        "image": {
            "type": "image",
            "url": "/test/integration/image/0.png",
            "coordinates": [
                [-122.51596391201019, 37.56238816766053],
                [-122.51467645168304, 37.56410183312965],
                [-122.51309394836426, 37.563391708549425],
                [-122.51423120498657, 37.56161849366671]
            ]
        }
    },
    "layers": [{
        "id": "background",
        "type": "background",
        "paint": {
            "background-color": "rgb(128,128,128)"
        }
    }, {
        "id": "image",
        "type": "raster",
        "source": "image",
        "paint": {
            "raster-resampling": "nearest"
        }
    }]
};

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9'
});

map.on('load', function() {
    map.loadImage('https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png', function(error, image) {
        if (error) throw error;
        map.addImage('cat', image);
        map.addLayer({
            "id": "points",
            "type": "symbol",
            "source": {
                "type": "geojson",
                "data": {
                    "type": "FeatureCollection",
                    "features": [{
                        "type": "Feature",
                        "geometry": {
                            "type": "Point",
                            "coordinates": [0, 0]
                        }
                    }]
                }
            },
            "layout": {
                "icon-image": "cat",
                "icon-size": 0.25
            }
        });
        console.log('images', map.listImages());
    });
});
// var imageStyle = {
//     "version": 8,
//     "sources": {
//         "image": {
//             "type": "image",
//             "url": "/test/integration/image/0.png",
//             "coordinates": [
//                 [-122.51596391201019, 37.56238816766053],
//                 [-122.51467645168304, 37.56410183312965],
//                 [-122.51309394836426, 37.563391708549425],
//                 [-122.51423120498657, 37.56161849366671]
//             ]
//         }
//     },
//     "layers": [{
//         "id": "background",
//         "type": "background",
//         "paint": {
//             "background-color": "rgb(4,7,14)"
//         }
//     }, {
//         "id": "image",
//         "type": "raster",
//         "source": "image"
//     }]
// };
//
// var map = new mapboxgl.Map({
//     container: 'map',
//     minZoom: 14,
//     zoom: 17,
//     center: [-122.514426, 37.562984],
//     bearing: -96,
//     style: imageStyle,
//     hash: false
// });
//
// map.on('load', function () {
//   console.log('images', map.listImages());
// });

</script>
</body>
</html> -->
